CREATE DATABASE BDSTOCK;

CREATE USER 'usuarioStockease'@'%' IDENTIFIED BY '12345';

GRANT ALL ON *.* TO 'usuarioStockease'@'%' WITH GRANT OPTION;

FLUSH PRIVILEGES;

USE BDSTOCK;

CREATE TABLE tb_clientes (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(100) NOT NULL,
  rg VARCHAR(30),
  cpf VARCHAR(20) NOT NULL,
  email VARCHAR(200) NOT NULL,
  telefone VARCHAR(30),
  celular VARCHAR(30),
  cep VARCHAR(100) NOT NULL,
  endereco VARCHAR(255) NOT NULL,
  numero INT NOT NULL,
  complemento VARCHAR(200),
  bairro VARCHAR(100),
  cidade VARCHAR(100) NOT NULL,
  estado VARCHAR(2) NOT NULL
);

CREATE TABLE tb_fornecedores (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(100) NOT NULL,
  cnpj VARCHAR(100) NOT NULL,
  email VARCHAR(200) NOT NULL,
  telefone VARCHAR(30),
  celular VARCHAR(30),
  cep VARCHAR(100) NOT NULL,
  endereco VARCHAR(255) NOT NULL,
  numero INT NOT NULL,
  complemento VARCHAR(200),
  bairro VARCHAR(100),
  cidade VARCHAR(100) NOT NULL,
  estado VARCHAR(2) NOT NULL
);

CREATE TABLE tb_funcionarios (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(100) NOT NULL,
  rg VARCHAR(30),
  cpf VARCHAR(20) NOT NULL,
  email VARCHAR(200) NOT NULL,
  senha VARCHAR(10) NOT NULL,
  cargo VARCHAR(100) NOT NULL,
  nivel_acesso VARCHAR(50) NOT NULL,
  telefone VARCHAR(30),
  celular VARCHAR(30),
  cep VARCHAR(100) NOT NULL,
  endereco VARCHAR(255) NOT NULL,
  numero INT NOT NULL,
  complemento VARCHAR(200),
  bairro VARCHAR(100),
  cidade VARCHAR(100) NOT NULL,
  estado VARCHAR(2) NOT NULL
);

CREATE TABLE tb_produtos (
  id INT AUTO_INCREMENT PRIMARY KEY,
  descricao VARCHAR(100) NOT NULL,
  preco DECIMAL(10, 2) NOT NULL,
  qtd_estoque INT NOT NULL,
  for_id INT NOT NULL,

  FOREIGN KEY (for_id) REFERENCES tb_fornecedores(id)
);

CREATE TABLE tb_vendas (
  id INT AUTO_INCREMENT PRIMARY KEY,
  cliente_id INT NOT NULL,
  data_venda DATETIME NOT NULL,
  total_venda DECIMAL(10, 2) NOT NULL,
  observacoes TEXT,

  FOREIGN KEY (cliente_id) REFERENCES tb_clientes(id)
);

CREATE TABLE tb_itensvendas (
  id INT AUTO_INCREMENT PRIMARY KEY,
  venda_id INT NOT NULL,
  produto_id INT NOT NULL,
  qtd INT NOT NULL,
  subtotal DECIMAL(10, 2) NOT NULL,

  FOREIGN KEY (venda_id) REFERENCES tb_vendas(id),
  FOREIGN KEY (produto_id) REFERENCES tb_produtos(id)
);
